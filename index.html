<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>BMW | Ultra Smooth Scroll Experience</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #0a0a0a;
      color: #fff;
      overflow-x: hidden;
      height: 700vh; /* Scroll space for video + content */
      -webkit-overflow-scrolling: touch; /* Smooth native scrolling on iOS */
    }
    
    .header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      padding: 24px 40px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 100;
      background: linear-gradient(to bottom, rgba(0,0,0,0.8) 0%, rgba(0,0,0,0) 100%);
      transition: background 0.3s ease, padding 0.3s ease;
    }
    .header.scrolled {
      background: rgba(0, 0, 0, 0.95);
      padding: 16px 40px;
    }
    
    .logo {
      font-size: 28px;
      font-weight: 700;
      color: #fff;
      letter-spacing: 1px;
    }
    .logo span {
      color: #0066b3;
    }
    .nav-links {
      display: flex;
      gap: 32px;
    }
    .nav-links a {
      color: #fff;
      text-decoration: none;
      font-weight: 500;
      transition: color 0.3s ease;
    }
    .nav-links a:hover {
      color: #0066b3;
    }
    
    .video-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      background: #000;
      z-index: 1;
    }
    
    video {
      position: absolute;
      top: 50%;
      left: 50%;
      min-width: 100vh;
      min-height: 100vw;
      width: auto;
      height: auto;
      transform: translate(-50%, -50%) rotate(270deg);
      max-width: none;
    }
    
    .progress-container {
      position: fixed;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      width: 60%;
      max-width: 600px;
      height: 4px;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 4px;
      z-index: 10;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #0066b3, #00a8ff);
      border-radius: 4px;
      box-shadow: 0 0 10px rgba(0, 168, 255, 0.5);
      transform: scaleX(0);
      transform-origin: left;
      will-change: transform;
      transition: transform 0.1s linear;
    }
    
    .time-display {
      position: fixed;
      top: 30px;
      right: 30px;
      color: white;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      font-size: 14px;
      background: rgba(0, 0, 0, 0.7);
      padding: 8px 16px;
      border-radius: 20px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      z-index: 10;
      display: flex;
      align-items: center;
      gap: 8px;
      user-select: none;
    }
    
    .content-section {
      position: relative;
      z-index: 20;
      padding: 60px 10%;
      margin-top: 300vh; /* Keep content below video section */
      background: #0a0a0a;
      transition: opacity 0.5s ease;
    }
    
    .section {
      margin-bottom: 120px;
      opacity: 0;
      transform: translateY(50px);
      transition: opacity 1s ease, transform 1s ease;
    }
    .section.visible {
      opacity: 1;
      transform: translateY(0);
    }
    
    .section h2 {
      font-size: 42px;
      margin-bottom: 24px;
      color: #0066b3;
    }
    .section p {
      font-size: 18px;
      line-height: 1.6;
      margin-bottom: 20px;
      color: #ccc;
      max-width: 800px;
    }
    
    .specs-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 24px;
      margin-top: 40px;
    }
    
    .spec-card {
      background: rgba(255, 255, 255, 0.05);
      padding: 24px;
      border-radius: 12px;
      text-align: center;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }
    
    .spec-card i {
      font-size: 32px;
      color: #0066b3;
      margin-bottom: 16px;
    }
    
    .spec-card h3 {
      font-size: 20px;
      margin-bottom: 12px;
    }
    
    .spec-card p {
      font-size: 16px;
      color: #aaa;
    }
    
    .scroll-indicator {
      position: fixed;
      bottom: 100px;
      left: 50%;
      transform: translateX(-50%);
      color: white;
      font-size: 16px;
      background: rgba(0, 0, 0, 0.7);
      padding: 12px 24px;
      border-radius: 30px;
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      z-index: 10;
      display: flex;
      align-items: center;
      gap: 12px;
      transition: opacity 0.5s ease;
      user-select: none;
    }
    .scroll-indicator i {
      color: #0066b3;
      animation: bounce 2s infinite;
    }
    
    @keyframes bounce {
      0%, 20%, 50%, 80%, 100% {transform: translateY(0);}
      40% {transform: translateY(-10px);}
      60% {transform: translateY(-5px);}
    }
    
    .footer {
      text-align: center;
      padding: 40px;
      background: #000;
      color: #666;
      font-size: 14px;
    }
    
    body::-webkit-scrollbar {
      width: 0px;
      background: transparent;
    }
    
    @media (max-width: 768px) {
      .header {
        padding: 16px 20px;
      }
      
      .nav-links {
        display: none;
      }
      
      .content-section {
        padding: 40px 5%;
      }
      
      .section h2 {
        font-size: 32px;
      }
      
      .progress-container {
        width: 80%;
      }
      
      video {
        min-width: initial;
        min-height: initial;
        width: 100vw;
        height: 100vh;
        transform: translate(-50%, -50%) rotate(0deg); /* Rotate off on small screens for usability */
      }
    }
  </style>
</head>
<body>
  <header class="header">
    <div class="logo">BMW <span>|</span> THE iX</div>
    <nav class="nav-links">
      <a href="#">Design</a>
      <a href="#">Performance</a>
      <a href="#">Technology</a>
      <a href="#">Innovation</a>
    </nav>
  </header>
  
  <div class="video-container">
    <video id="myVideo" preload="auto" muted playsinline>
      <source src="BMW_Video.mp4" type="video/mp4" />
      Your browser does not support HTML5 video.
    </video>
  </div>
  
  <div class="progress-container">
    <div class="progress-fill" id="progressFill"></div>
  </div>
  
  <div class="time-display" id="timeDisplay">
    <i class="fas fa-play-circle"></i>
    <span>00:00 / 00:00</span>
  </div>
  
  <div class="scroll-indicator" id="scrollIndicator">
    <i class="fas fa-chevron-down"></i>
    <span>Scroll to experience</span>
  </div>
  
  <div class="content-section">
    <div class="section" id="section1">
      <h2>Elegant Design</h2>
      <p>The BMW iX represents a new era of electric mobility. With its minimalist design, luxurious materials, and spacious interior, it offers a completely new driving experience.</p>
      <p>The exterior showcases a sleek, aerodynamic profile that enhances efficiency while maintaining the distinctive BMW presence on the road.</p>
      <div class="specs-grid">
        <div class="spec-card">
          <i class="fas fa-wind"></i>
          <h3>0.25 Cd</h3>
          <p>Exceptional aerodynamics</p>
        </div>
        <div class="spec-card">
          <i class="fas fa-expand-arrows-alt"></i>
          <h3>Spacious Interior</h3>
          <p>Luxury and comfort redefined</p>
        </div>
        <div class="spec-card">
          <i class="fas fa-leaf"></i>
          <h3>Sustainable Materials</h3>
          <p>Eco-friendly interior options</p>
        </div>
      </div>
    </div>
    
    <div class="section" id="section2">
      <h2>Exceptional Performance</h2>
      <p>With over 500 horsepower and all-wheel drive, the BMW iX delivers breathtaking acceleration and precise handling. The electric powertrain provides instant torque for a responsive driving experience.</p>
      <p>Advanced battery technology enables ranges of over 300 miles on a single charge, making long journeys effortless and worry-free.</p>
      <div class="specs-grid">
        <div class="spec-card">
          <i class="fas fa-bolt"></i>
          <h3>500+ HP</h3>
          <p>Electric powertrain performance</p>
        </div>
        <div class="spec-card">
          <i class="fas fa-tachometer-alt"></i>
          <h3>0-60 mph: 4.4s</h3>
          <p>Rapid acceleration</p>
        </div>
        <div class="spec-card">
          <i class="fas fa-road"></i>
          <h3>300+ Miles</h3>
          <p>Estimated range</p>
        </div>
      </div>
    </div>
    
    <div class="section" id="section3">
      <h2>Cutting-Edge Technology</h2>
      <p>The BMW iX features the latest in automotive technology, including a curved display that blends seamlessly into the cockpit, advanced driver assistance systems, and 5G connectivity.</p>
      <p>With over-the-air updates, your vehicle continuously improves, adding new features and enhancing existing ones throughout your ownership experience.</p>
      <div class="specs-grid">
        <div class="spec-card">
          <i class="fas fa-desktop"></i>
          <h3>Curved Display</h3>
          <p>Next-generation interface</p>
        </div>
        <div class="spec-card">
          <i class="fas fa-shield-alt"></i>
          <h3>Driver Assistance</h3>
          <p>Advanced safety systems</p>
        </div>
        <div class="spec-card">
          <i class="fas fa-sync-alt"></i>
          <h3>OTA Updates</h3>
          <p>Continuous improvement</p>
        </div>
      </div>
    </div>
  </div>
  
  <footer class="footer">
    <p>BMW iX | The Ultimate Electric Driving Machine</p>
    <p>Â© 2023 BMW AG. The BMW name, logo, and model designations are registered trademarks.</p>
  </footer>
  
  <script>
    const video = document.getElementById("myVideo");
    const progressFill = document.getElementById("progressFill");
    const timeDisplay = document.getElementById("timeDisplay");
    const scrollIndicator = document.getElementById("scrollIndicator");
    const header = document.querySelector('.header');
    const sections = document.querySelectorAll('.section');
    const contentSection = document.querySelector('.content-section');
    
    let targetTime = 0;
    let isVideoLoaded = false;
    let videoDuration = 0;
    let animationId;
    let ticking = false;
    let lastScrollY = 0;
    
    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = Math.floor(seconds % 60);
      return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    }
    
    function ultraSmoothSeek() {
      if (!isVideoLoaded) return;
      
      const timeDiff = targetTime - video.currentTime;
      const threshold = 0.02; // Small threshold to avoid jitter
      
      // Use easing with smoothing factor more dynamic based on difference magnitude
      let smoothingFactor = 0.15;
      if (Math.abs(timeDiff) < 0.1) {
        smoothingFactor = 0.3; // Faster catch-up when closer
      }
      
      if (Math.abs(timeDiff) > threshold) {
        video.currentTime += timeDiff * smoothingFactor;
      } else if (Math.abs(timeDiff) > 0) {
        video.currentTime = targetTime; // Snap when close enough
      }
      
      const progress = video.currentTime / videoDuration;
      progressFill.style.transform = `scaleX(${progress})`;
      timeDisplay.querySelector('span').textContent = 
        `${formatTime(video.currentTime)} / ${formatTime(videoDuration)}`;
      
      animationId = requestAnimationFrame(ultraSmoothSeek);
    }
    
    video.addEventListener("loadedmetadata", () => {
      videoDuration = video.duration;
      isVideoLoaded = true;
      ultraSmoothSeek();
      console.log(`Video loaded: ${videoDuration.toFixed(2)} seconds`);
    });
    
    function handleScroll() {
      lastScrollY = window.scrollY;
      if (!ticking) {
        requestAnimationFrame(() => {
          // Define scroll range fully dedicated to video playback
          const videoScrollHeight = window.innerHeight * 2.5; // Larger scroll to better map time
          const maxScrollForVideo = videoScrollHeight - window.innerHeight;
          
          let scrollPercent = 0;
          if (lastScrollY <= videoScrollHeight) {
            scrollPercent = Math.min(lastScrollY / maxScrollForVideo, 1);
            targetTime = scrollPercent * videoDuration;
            contentSection.style.opacity = '0';
          } else {
            targetTime = videoDuration;
            contentSection.style.opacity = '1';
          }
          
          // Toggle header background on scroll threshold
          if (lastScrollY > 50) {
            header.classList.add('scrolled');
          } else {
            header.classList.remove('scrolled');
          }
          
          // Show/hide scroll indicator for video section only
          if (lastScrollY < videoScrollHeight - 100 && scrollPercent < 0.95) {
            scrollIndicator.style.opacity = '1';
          } else {
            scrollIndicator.style.opacity = '0';
          }
          
          // Animate sections visibility
          sections.forEach(section => {
            const sectionTop = section.getBoundingClientRect().top;
            if (sectionTop < window.innerHeight * 0.75) {
              section.classList.add('visible');
            } else {
              section.classList.remove('visible');
            }
          });
          
          ticking = false;
        });
        ticking = true;
      }
    }
    
    window.addEventListener("scroll", handleScroll, { passive: true });
    
    video.addEventListener("canplay", () => {
      // Autoplay muted video (mobile compatible)
      video.play().catch(e => console.log("Autoplay prevented:", e));
    });
    
    window.addEventListener("resize", () => {
      handleScroll();
    });
    
    video.addEventListener("error", (e) => {
      console.error("Video playback error:", e);
    });
    
    document.addEventListener("visibilitychange", () => {
      if (document.hidden) {
        if (animationId) cancelAnimationFrame(animationId);
      } else if (isVideoLoaded) {
        ultraSmoothSeek();
      }
    });
    
    window.addEventListener("load", () => {
      window.scrollTo(0, 0);
      handleScroll();
      video.play().then(() => video.pause()).catch(() => {
        console.log("Autoplay blocked, video ready.");
      });
    });
  </script>
</body>
</html>
